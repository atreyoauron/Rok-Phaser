<!DOCTYPE html>
<html>
    <head>
        <title>ROK</title>
        <link rel="manifest" href="manifest.json">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="./normalize.css" type="text/css" rel='stylesheet' />
        <link href="./game.css" type="text/css" rel='stylesheet' />
    </head>
    <div class='fontLoader' style='font-family: Nordic Alternative;position:absolute;left: -3000px;'>hello</div>

    <body>
        <div id="vikingpedia" class="hidden">
          <ul id="menu" class="list">
          </ul>
          <pre class="text" id="texto">
            
          </pre>
        </div>
        <video id="finalVideo">
          <source src="./src/assets/videos/final_cutscene.mp4" type="video/mp4">
        </video>
        <!-- <h1>ROK</h1>
        <p>
            use 	as setas para movimentar o personagem, espa√ßo ou seta para cima para pular
        </p> -->
        <script src="./src/assets/js/phaser.js" type="text/javascript"></script>
        <script src="./src/app/main.js" type="module"></script>
        <script>
          if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
              navigator.serviceWorker.register('./sw.js').then(function(registration) {
                // Registration was successful
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
              }).catch(function(err) {
                // registration failed :(
                console.log('ServiceWorker registration failed: ', err);
              });
            });
          }

          function toggleFullScreen() {
            if ((document.fullScreenElement && document.fullScreenElement !== null) ||
            (!document.mozFullScreen && !document.webkitIsFullScreen)) {
              if (document.documentElement.requestFullScreen) {
                document.documentElement.requestFullScreen();
              } else if (document.documentElement.mozRequestFullScreen) {
                document.documentElement.mozRequestFullScreen();
              } else if (document.documentElement.webkitRequestFullScreen) {
                document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
              }
            } else {
              if (document.cancelFullScreen) {
                document.cancelFullScreen();
              } else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen();
              } else if (document.webkitCancelFullScreen) {
                document.webkitCancelFullScreen();
              }
            }
          }
        </script>

        <script>
            const vikingPediaTopics = {
              'teste47287438': {
                'texto': 'lorem ipsum dolor'
              },
              'teste2': {
                'texto': 'lorem <i>ipsum</i> dolor 2\n <b>linha 2</b> <img src="./src/assets/img/hel.png" />'
              },
              'teste3': {
                'texto': 'ldasdasdsadsaorem <i>ipsum</i> dolor 2\n <b>linha 2</b> <img src="./src/assets/img/hel.png" />'
              }              
            }

            const vikingpedia = document.getElementById('vikingpedia');
            console.log(vikingpedia)
            const lista = document.getElementById('menu');
            const texto = document.getElementById('texto');

            const keys = Object.keys(vikingPediaTopics);
            
            console.log('keys');
            for(let i = 0; i < keys.length; i++) {
              const element = document.createElement('li');
              element.innerHTML = keys[i];
              lista.appendChild(element);

              element.addEventListener('click', function() {
                texto.innerHTML = vikingPediaTopics[keys[i]].texto;
              });
            }
        </script>
    </body>
</html>

